self.onmessage=async function(e){if(e.data.file&&"begin hash"==e.data.msg){const r=await(a=e.data.file,new Promise(((e,r)=>{var s=0,t=(performance.now(),a.size);const n=new FileReader,o=new SparkMD5.ArrayBuffer,l=2097152,d=Math.ceil(a.size/l);let i=0;n.onload=a=>{o.append(a.target.result),++i,i<d?c():e(o.end())},n.addEventListener("progress",(e=>{s+=e.loaded,Math.round(s/t*100)})),n.addEventListener("loadend",(e=>{e.total>0&&performance.now()})),n.onerror=()=>r(n.error);const c=()=>{const e=i*l,r=e+l>=a.size?a.size:e+l;n.readAsArrayBuffer(File.prototype.slice.call(a,e,r))};c()})));postMessage({status:"complete",hash:r}),self.close()}var a};